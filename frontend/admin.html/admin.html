<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
     <div class="login">
        <h2>Iniciar Sesion</h2>
        <form id="login-form">
          <input type="text" id="usuario" placeholder="Usuario" required><br>
          <input type="password" id="contraseña" placeholder="Contraseña" required><br>
          <button type="submit">Ingresar</button>
        </form>
      </div>
    
      <script>
        document.getElementById('login-form').addEventListener('submit', function(e) {
          e.preventDefault();
          const usuario = document.getElementById('usuario').value;
          const contraseña = document.getElementById('contraseña').value;
    
          if (usuario === "admin" && contraseña === "1234") {
            localStorage.setItem("admin", "true");
            window.location.href = "admin.html";
          } else {
            alert("Credenciales incorrectas");
          }
        });
      </script>



</body>
</html> -->

<h2>Subir producto</h2>
<form id="form-producto">
  <input name="nombre" placeholder="Nombre" required><br>
  <input name="descripcion" placeholder="Descripción" required><br>
  <input name="precio" type="number" placeholder="Precio" required><br>
  <input name="stock" type="number" placeholder="Stock" required><br>
  <button type="submit">Subir</button>
</form>

<script>
document.getElementById('form-producto').addEventListener('submit', async e => {
  e.preventDefault();
  const datos = Object.fromEntries(new FormData(e.target));
  const token = localStorage.getItem('token');

  const res = await fetch('http://localhost:3000/api/productos', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Bearer ' + token
    },
    body: JSON.stringify(datos)
  });

  const result = await res.json();
  alert(result.mensaje || result.error);
});
</script>



